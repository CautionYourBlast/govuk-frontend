{#- If an id 'prefix' is not passed, fall back to using the name attribute
  instead. We need this for error messages and hints as well -#}
{% set idPrefix = params.idPrefix if params.idPrefix -%}

<div {%- if params.id %} id="{{params.id}}"{% endif %} class="ds_tabs {%- if params.classes %} {{ params.classes }}{% endif %}" {%- for attribute, value in params.attributes %} {{attribute}}="{{value}}"{% endfor %} data-module="ds_tabs">
  <nav class="ds_tabs__navigation" aria-labelledby="ds_tabs__title">
    <h2 class="ds_tabs__title">
      {{ params.title | default ("Contents") }}
    </h2>
    {% if(params.items | length) %}
    <ul class="ds_tabs__list">
      {% for item in params.items %}
        {% if item %}
          {% set id = item.id if item.id else idPrefix + "-" + loop.index %}
          <li class="ds_tabs__tab{% if loop.index == 1 %} ds_tabs__tab--selected{% endif %}">
            <a class="ds_tabs__tab-link" href="#{{ id }}"
              {%- for attribute, value in item.attributes %} {{attribute}}="{{value}}"{% endfor %}>
              {{ item.label }}
            </a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </nav>
  {% endif %}
  {% for item in params.items %}
    {% if item %}
      {% set id = item.id if item.id else idPrefix + "-" + loop.index %}
      <div class="ds_tabs__content ds_tabs__content--bordered{% if loop.index > 1 %} ds_tabs__panel--hidden{% endif %}" id="{{ id }}"{% for attribute, value in item.panel.attributes %} {{attribute}}="{{value}}"{% endfor %}>
        {% if item.panel.html %}
          {{ item.panel.html | safe }}
        {% elif item.panel.text %}
          <p class="ds_body">{{ item.panel.text }}</p>
        {% endif %}
      </div>
    {% endif %}
  {% endfor %}
</div>
