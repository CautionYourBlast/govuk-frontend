{%- if params.type == "success" %}
  {% set successBanner = true %}
{% endif %}

{%- if successBanner %}
  {% set typeClass = "ds_notification--" + params.type %}
{% endif %}

{% if params.role %}
  {% set role = params.role %}
{% elif successBanner %}
  {# If type is success, add `role="alert"` to prioritise the information in the notification banner to users of assistive technologies #}
  {% set role = "alert" %}
{% else %}
  {# Otherwise add `role="region"` to make the notification banner a landmark to help users of assistive technologies to navigate to the banner #}
  {% set role = "region" %}
{% endif %}

{%- if params.titleHtml %}
  {% set title = params.titleHtml | safe %}
{%- elif params.titleText %}
  {% set title = params.titleText %}
{%- elif successBanner %}
  {% set title = "Success" %}
{%- else %}
  {% set title = "Important" %}
{%- endif -%}

<div class="ds_notification ds_reversed {% if typeClass %} {{ typeClass }}{% endif %}{% if params.classes %} {{ params.classes }}{% endif %}" role="{{ role }}"
  aria-labelledby="{{ params.titleId | default("govuk-notification-banner-title", true) }}"
  data-module="ds-notification"
  {%- if params.disableAutoFocus !== undefined %} data-disable-auto-focus="{{ params.disableAutoFocus }}"{% endif %}
  {%- for attribute, value in params.attributes %} {{attribute}}="{{value}}"{% endfor %}>
  <div class="ds_wrapper">
    <div class="ds_notification__content  ds_notification__content--has-close">
      <h{{ params.titleHeadingLevel | default(2, true) }} class="visually-hidden" id="{{ params.titleId | default("govuk-notification-banner-title", true) }}">
          {{ title }}
      </h{{ params.titleHeadingLevel | default(2, true) }}>
      
      <div class="ds_notification__text">
        {%- if caller or params.html -%}
          {{ caller() if caller else params.html | safe }}
        {%- elif params.text -%}
          {# Set default style for single line content #}
          <p>{{ params.text }}</p>
        {%- endif -%}
      </div>

      <button class="ds_notification__close  js-close-notification" type="button">
        <svg class="ds_icon" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 0 24 24" width="40px" fill="#ffffff"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><use href="#close"></use></svg>
      </button>
    </div>
  </div>
</div>

{# icons.stack.svg#close #}