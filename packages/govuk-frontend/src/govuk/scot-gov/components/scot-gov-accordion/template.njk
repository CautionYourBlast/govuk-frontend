{% from "../../../macros/i18n.njk" import govukI18nAttributes %}

{% set id = params.id %}
{% set headingLevel = params.headingLevel if params.headingLevel else 2 %}

<div class="ds_accordion {%- if params.classes %} {{ params.classes }}{% endif -%}" data-module="ds_accordion" id="{{ id }}"
  {{- govukI18nAttributes({
    key: 'hide-all-sections',
    message: params.hideAllSectionsText
  }) -}}

  {{- govukI18nAttributes({
    key: 'hide-section',
    message: params.hideSectionText
  }) -}}

  {{- govukI18nAttributes({
    key: 'hide-section-aria-label',
    message: params.hideSectionAriaLabelText
  }) -}}

  {{- govukI18nAttributes({
    key: 'show-all-sections',
    message: params.showAllSectionsText
  }) -}}

  {{- govukI18nAttributes({
    key: 'show-section',
    message: params.showSectionText
  }) -}}

  {{- govukI18nAttributes({
    key: 'show-section-aria-label',
    message: params.showSectionAriaLabelText
  }) -}}

  {%- if params.rememberExpanded !== undefined %} data-remember-expanded="{{ params.rememberExpanded | escape }}"{% endif %}
  {%- for attribute, value in params.attributes %} {{attribute}}="{{value}}"{% endfor %}>
  {% for item in params.items %}
    {% if item %}
      <div class="ds_accordion-item">
        <input type="checkbox" checked="true" class="visually-hidden  ds_accordion-item__control" id="panel-{{ loop.index }}" aria-labelledby="panel-{{ loop.index }}-heading" data-accordion="accordion-open-{{ loop.index }}" />
        <div class="ds_accordion-item__header">
          <h{{ headingLevel }} id="panel-{{ loop.index }}-heading" class="ds_accordion-item__title">
              {{ item.heading.html | safe if item.heading.html else item.heading.text }}
          </h{{ headingLevel }}>
          <span class="ds_accordion-item__indicator"></span>
          <label class="ds_accordion-item__label" for="panel-{{ loop.index }}"><span class="visually-hidden">Show this section</span></label>
{#          {% if item.summary.html or item.summary.text %}
            <div class="ds_accordion__section-summary ds_body" id="{{ id }}-summary-{{ loop.index }}">
              {{ item.summary.html | safe if item.summary.html else item.summary.text }}
            </div>
          {% endif %} #}
        </div>
        <div id="{{ id }}-content-{{ loop.index }}" class="ds_accordion-item__body" aria-labelledby="{{ id }}-heading-{{ loop.index }}">
          {% if item.content.html %}
            <p class="ds_accordion-item__text">{{ item.content.html | safe }}</p>
          {% elif item.content.text %}
            <p class="ds_accordion-item__text">{{ item.content.text }}</p>
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>
