{% from "../button/macro.njk" import govukButton -%}

<div class="ds_notification  ds_notification--large  ds_notification--cookie  js-initial-cookie-content {{ params.class if params.class }}" data-module="ds-cookie-notification" data-nosnippet role="region" aria-label="{{ params.ariaLabel | default("Cookie banner", true) }}"
  {%- if params.hidden %} hidden{% endif %}
  {%- for attribute, value in params.attributes %} {{attribute}}="{{value}}"{% endfor %}>

  {%- for message in params.messages %}
    {% set classNames = "ds_wrapper" %}
    {% if message.class %}
      {% set classNames = classNames + " " + message.class %}
    {% endif %}

    <div class="{{classNames}}" {%- if message.role %} role="{{message.role}}"{% endif %}
    {%- for attribute, value in message.attributes %} {{attribute}}="{{value}}"{% endfor %}
    {%- if message.hidden %} hidden{% endif %}>

    <div class="ds_notification__content">
      <div>
        {% if message.headingHtml or message.headingText %}
        <h2 role="heading" class="visually hidden">
          {%- if message.headingHtml -%}
            {{ message.headingHtml | safe }}
          {%- else -%}
            {{ message.headingText }}
          {%- endif -%}
        </h2>
        {% endif %}

        <div class="ds_notification__text">
          {%- if message.html -%}
            {{ message.html | safe }}
          {%- elif message.text -%}
            <p class="govuk-body">{{ message.text }}</p>
          {%- endif -%}
        </div>
      </div>
    </div>

      {% if message.actions %}
      <div class="ds_notification__actions">
        {% for action in message.actions %}
          {% if action.href %}
            {% if action.type == "button" %}
              {{ scotGovButton({
                "text": action.text,
                "type": "button",
                "classes": action.classes,
                "href": action.href,
                "attributes": action.attributes
              }) | indent(12) | trim }}
            {% else %}
              {% set linkclass = "govuk-link" %}
              {% if action.classes %}
                {% set linkclass = linkclass + " " + action.classes %}
              {% endif %}
              <a class="{{ linkclass }}" href="{{ action.href }}" {%- for attribute, value in action.attributes %} {{attribute}}="{{value}}"{% endfor %}>{{ action.text }}</a>
            {% endif %}
          {% else %}
            {{ govukButton({
              "text": action.text,
              "value": action.value,
              "name": action.name,
              "type": action.type,
              "classes": action.classes,
              "attributes": action.attributes
            }) | indent(12) | trim }}
          {% endif %}
        {% endfor %}
      </div>
      {% endif %}
    </div>
  {% endfor %}
</div>
